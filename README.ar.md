# ا ف ب --`auto-pager`

ap عبارة عن أداة مساعدة لـ shell تسمح لإخراج أوامر shell الأخرى بالدخول تلقائيًا إلى وضع التقليب التفاعلي للصفحة.

يتكون ap من جزأين، برنامج ثنائي مكتوب بلغة Go يلتقط مخرجات الأوامر ويدعم تقليب الصفحات، ومجموعة من نصوص shell التي تنشئ غلافًا يحمل نفس الاسم لقائمة أوامر يحددها المستخدم.

استخدام الأوامر بعد الالتفاف هو نفسه كما كان من قبل، ويجب ألا يغير عادات المستخدم أو يسبب أي مشاكل.

اقرأ هذا بلغات أخرى:[إنجليزي](README.en.md),[الصينية المبسطة](README.md),[الصينية التقليدية](README.zh-TW.md),[عربي](README.ar.md),[فرنسي](README.fr.md),[لا](README.hi.md)

ap عبارة عن أداة shell تتيح لإخراج أوامر shell الأخرى الدخول تلقائيًا إلى وضع تقليب الصفحات التفاعلي.

يتكون ap من جزأين، برنامج ثنائي مكتوب بلغة Go، وهو المسؤول عن التقاط مخرجات الأمر ودعم قلب الصفحة،
ومجموعة من نصوص shell المسؤولة عن إنشاء أغلفة بنفس الاسم لقوائم الأوامر المحددة من قبل المستخدم.

استخدام الأمر بعد الالتفاف هو نفسه كما كان من قبل، ولا ينبغي تغيير عادات التشغيل للمستخدم، ولن يسبب أي مشكلة للمستخدم.

## ثَبَّتَ

    go install github.com/flw-cn/ap@master

## إعدادات

-   `bash`(#سحق)
-   `fish`(#`fish`)
-   `zsh`(#`zsh`)

### سحق

في الخاص بك`~/.bashrc`أضف إليه ما يلي:

```sh
eval "$(ap --bash)"
```

يلف ap مجموعة من الأوامر بشكل افتراضي. إذا لم تكن راضيًا، يمكنك إعادة التخصيص من خلال متغيرات البيئة:

```sh
AUTO_PAGER_CMDS=(go cargo make)
eval "$(ap --bash)"
```

أو قم فقط بإضافة أوامر جديدة أعلى القائمة الافتراضية:

```sh
AUTO_PAGER_CMDS_EXTRA=(ps last)
eval "$(ap --bash)"
```

بالإضافة إلى ذلك، يمكن أيضًا استخدام ap مع[grc](https://github.com/garabik/grc)من خلال العمل معًا، يمكن تثبيت grc باستخدام Homebrew ضمن نظام التشغيل macOS:

```sh
brew install grc
```

يقوم ap + grc بتغليف مجموعة من الأوامر افتراضيًا. إذا لم تكن راضيًا، يمكنك إعادة التخصيص من خلال متغيرات البيئة:

```sh
AUTO_PAGER_CMDS_WITH_GRC=(ps last dig diff)
eval "$(ap --bash)"
```

أو قم فقط بإضافة أوامر جديدة أعلى القائمة الافتراضية:

```sh
AUTO_PAGER_CMDS_WITH_GRC_EXTRA=(ps last)
eval "$(ap --bash)"
```

بالإضافة إلى ذلك، متغير البيئة`$AUTO_PAGER_MIN_HEIGHT`يمكنك التحكم في الحد الأدنى لعدد الصفوف لبدء الترحيل بها:

```sh
AUTO_PAGER_MIN_HEIGHT=30        # 输出超过 30 行时才开始分页
eval "$(ap --bash)"
```

إذا تم تكوينه كرقم سالب، فإنه يمثل نسبة مئوية من ارتفاع النافذة الطرفية:

```sh
AUTO_PAGER_MIN_HEIGHT='-50'     # 输出超过终端窗口高度的 50% 时才开始分页
eval "$(ap --bash)"
```

إذا لم يتم تحديدها`AUTO_PAGER_MIN_HEIGHT`، الافتراضي هو`-80`،الآن`80%`。

### `fish`

في الخاص بك`~/.config/fish/config.fish`أضف إليه ما يلي:

```sh
ap --fish | source
```

يلف ap مجموعة من الأوامر بشكل افتراضي. إذا لم تكن راضيًا، يمكنك إعادة التخصيص من خلال متغيرات البيئة:

```sh
set AUTO_PAGER_CMDS go cargo make
ap --fish | source
```

أو قم فقط بإضافة أوامر جديدة أعلى القائمة الافتراضية:

```sh
set AUTO_PAGER_CMDS_EXTRA ps last
ap --fish | source
```

بالإضافة إلى ذلك، يمكن أيضًا استخدام ap مع[grc](https://github.com/garabik/grc)من خلال العمل معًا، يمكن تثبيت grc باستخدام Homebrew ضمن نظام التشغيل macOS:

```sh
brew install grc
```

يقوم ap + grc بتغليف مجموعة من الأوامر افتراضيًا. إذا لم تكن راضيًا، يمكنك إعادة التخصيص من خلال متغيرات البيئة:

```sh
set AUTO_PAGER_CMDS_WITH_GRC ps last dig diff
ap --fish | source
```

أو قم فقط بإضافة أوامر جديدة أعلى القائمة الافتراضية:

```sh
set AUTO_PAGER_CMDS_WITH_GRC_EXTRA ps last
ap --fish | source
```

بالإضافة إلى ذلك، متغير البيئة`$AUTO_PAGER_MIN_HEIGHT`يمكنك التحكم في الحد الأدنى لعدد الصفوف لبدء الترحيل بها:

```sh
set AUTO_PAGER_MIN_HEIGHT 30        # 输出超过 30 行时才开始分页
ap --fish | source
```

إذا تم تكوينه كرقم سالب، فإنه يمثل نسبة مئوية من ارتفاع النافذة الطرفية:

```sh
set AUTO_PAGER_MIN_HEIGHT -50     # 输出超过终端窗口高度的 50% 时才开始分页
ap --fish | source
```

إذا لم يتم تحديدها`AUTO_PAGER_MIN_HEIGHT`، الافتراضي هو`-80`،الآن`80%`。

### `zsh`

في الخاص بك`~/.zshrc`أضف إليه ما يلي:

```sh
eval "$(ap --zsh)"
```

يلف ap مجموعة من الأوامر بشكل افتراضي. إذا لم تكن راضيًا، يمكنك إعادة التخصيص من خلال متغيرات البيئة:

```sh
AUTO_PAGER_CMDS=(go cargo make)
eval "$(ap --zsh)"
```

أو قم فقط بإضافة أوامر جديدة أعلى القائمة الافتراضية:

```sh
AUTO_PAGER_CMDS_EXTRA=(ps last)
eval "$(ap --zsh)"
```

بالإضافة إلى ذلك، يمكن أيضًا استخدام ap مع[grc](https://github.com/garabik/grc)من خلال العمل معًا، يمكن تثبيت grc باستخدام Homebrew ضمن نظام التشغيل macOS:

```sh
brew install grc
```

يقوم ap + grc بتغليف مجموعة من الأوامر افتراضيًا. إذا لم تكن راضيًا، يمكنك إعادة التخصيص من خلال متغيرات البيئة:

```sh
AUTO_PAGER_CMDS_WITH_GRC=(ps last dig diff)
eval "$(ap --zsh)"
```

أو قم فقط بإضافة أوامر جديدة أعلى القائمة الافتراضية:

```sh
AUTO_PAGER_CMDS_WITH_GRC_EXTRA=(ps last)
eval "$(ap --zsh)"
```

بالإضافة إلى ذلك، متغير البيئة`$AUTO_PAGER_MIN_HEIGHT`يمكنك التحكم في الحد الأدنى لعدد الصفوف لبدء الترحيل بها:

```sh
AUTO_PAGER_MIN_HEIGHT=30        # 输出超过 30 行时才开始分页
eval "$(ap --zsh)"
```

إذا تم تكوينه كرقم سالب، فإنه يمثل نسبة مئوية من ارتفاع النافذة الطرفية:

```sh
AUTO_PAGER_MIN_HEIGHT='-50'     # 输出超过终端窗口高度的 50% 时才开始分页
eval "$(ap --zsh)"
```

إذا لم يتم تحديدها`AUTO_PAGER_MIN_HEIGHT`، الافتراضي هو`-80`،الآن`80%`。

## يستخدم

الأوامر التي تم تغليفها بالتطبيق تحتاج فقط إلى استخدامها كالمعتاد.
إذا كان هناك الكثير من المخرجات، فسيتم استدعاء متغير البيئة تلقائيًا`$PAGER`يقوم جهاز النداء المحدد بترقيم الصفحات.

إذا كان لديك`$PAGER`المتغيرات خاصة ولا يمكن تكييفها مع ap، ويمكنك أيضًا استخدام متغيرات البيئة`$AP_PAGER`اضبط جهاز النداء بشكل فردي لـ ap.

لو`$AP_PAGER`و`$PAGER`لم يتم تحديد أي منهما، ثم`less -Fr`。

الشروط التالية لن تبدأ جهاز النداء:

-   عندما يكون محتوى الإخراج صغيرًا جدًا، راجع`$AUTO_PAGER_MIN_HEIGHT`。
-   عندما يكتشف ap أن إخراج الأمر يحتوي على`ESC [?1049h`التسلسل، يتم اعتبار الأمر بمثابة تطبيق ملء الشاشة في هذا الوقت.
-   عندما لا يكتمل تنفيذ الأمر. لن يبدأ جهاز النداء حتى يكتمل تنفيذ الأمر.
    -   `ping`و`tcpdump`يجب الضغط على هذه الأوامر أولاً`Ctrl-C`لا يبدأ الترحيل حتى يتم إنهاء الأمر.
    -   `python`و`gdb`تحتاج مثل هذه الأوامر إلى انتظار خروج الأمر قبل بدء الترحيل.

## مشكلة شائعة

-   هل سيؤثر ذلك على الإخراج الملون للأمر؟
    -   متعود.
-   هل يؤدي الأمر الذي يكتشف محطة طرفية ويوفر مخرجات مختلفة للأوضاع الطرفية وغير الطرفية إلى تغيير مخرجاته؟
    -   متعود.
-   كيف يمكنني التشخيص إذا كنت أشك في أن ap يؤثر على إخراج الأمر؟
    -   يمكنك استخدامها`command foo`ينفذ`foo`، بحيث لا يتم استدعاء ap.
-   إذا كنت أضيف عادة بعد الأمر ap`| less`هل سيحدث خطأ ما؟
    -   متعود.
-   هل يمكن لأمر ap أيضًا إعادة توجيه مخرجاته؟
    -   يستطيع.
-   هل سيتم تعطيل الإكمال التلقائي لأوامر ap'd؟
    -   متعود.
-   دعم AP مثل`python`、`gdb`مثل هذا التطبيق التفاعلي؟
    -   يدعم. ومع ذلك، نظرًا لأن هذه التطبيقات تنتج بعض أحرف التحكم، فقد يكون المحتوى الذي تراه بعد ترقيم الصفحات فوضويًا بعض الشيء.
-   دعم AP مثل`htop`、`vim`مثل هذا التطبيق ملء الشاشة؟
    -   وبعبارة أخرى، لا يمكن أن يحدث خطأ على أي حال، لكن لا يمكنني معرفة ما هو الهدف العملي من إقران ap معهم.
